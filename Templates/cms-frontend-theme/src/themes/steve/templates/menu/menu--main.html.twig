{#
/**
 * @file
 * Default theme implementation to display a menu.
 *
 * Available variables:
 * - menu_name: The machine name of the menu.
 * - items: A nested list of menu items. Each menu item contains:
 *   - attributes: HTML attributes for the menu item.
 *   - below: The menu item child items.
 *   - title: The menu link title.
 *   - url: The menu link url, instance of \Drupal\Core\Url
 *   - localized_options: Menu link localized options.
 *
 * @ingroup templates
 */
#}
{% import _self as menus %}

{% if is_primary_rendered == false %}

    <!-- Primary items  -->
    <ul{{ attributes.addClass('menu', 'nav', 'navbar-nav') }}>
        {% for item in items %}
            {%
                set item_classes = [
                    item.is_expanded? 'expanded',
                    item.is_expanded and menu_level == 0 ? 'dropdown',
                    item.in_active_trail ? 'active',
                ]
            %}
            {% if item.in_active_trail %}
                <li{{ item.attributes.addClass(item_classes) }}>
                    <a href="{{ item.url }}"
                        class="dropdown-toggle"
                        data-target="#"
                        data-toggle="dropdown">
                            {{ item.title }}
                    </a>
                    <span class="marker"></span>
                </li>
            {% else %}
                <li{{ item.attributes.addClass(item_classes) }}>
                    {{ link(item.title, item.url) }}
                </li>
            {% endif %}
        {% endfor %}
    </ul>
    <!-- END Primary items  -->

    {# .btn-navbar is used as the toggle for collapsed navbar content #}
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
        <span class="sr-only">{{ 'Toggle navigation'|t }}</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>

{% else %}

    <!-- Secondary items  -->
    <ul{{ attributes.addClass('sub-menu', 'nav', 'navbar-nav') }}>
        {% for item in items %}
            <li{{ item.attributes.addClass(item_classes) }}>
                {{ link(item.title, item.url) }}
            </li>
        {% endfor %}
    </ul>
    <!-- END Secondary items  -->

{% endif %}
